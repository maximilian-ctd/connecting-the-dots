---
import { getTranslations, type Language } from '../i18n/translations';

interface Props {
  lang?: Language;
}

const { lang = 'de' } = Astro.props;
const t = getTranslations(lang);
const heroVideoSrc = '/videos/Video_Generation_for_Website_Hero.mp4';
---

<section class="bg-gradient-to-br from-white/70 via-primary/10 to-white/80 py-16 pb-8 px-4 overflow-hidden relative min-h-[70vh] flex items-center">
  <!-- Background video -->
  <div class="absolute inset-0 overflow-hidden">
    <video
      id="hero-video"
      class="w-full h-full object-cover md:object-[65%_center] object-[75%_center] opacity-85 pointer-events-none transition-[object-position] duration-700 ease-out hero-video-sharp"
      autoplay
      muted
      loop
      playsinline
      preload="auto"
    >
      <source src={heroVideoSrc} type="video/mp4" />
    </video>
    <div class="absolute inset-0 bg-gradient-to-br from-white/70 via-white/40 to-white/70"></div>
  </div>

  <div class="max-w-7xl mx-auto relative z-10 w-full px-2 sm:px-4">
    <div class="relative">
      <div id="hero-content" class="max-w-2xl lg:max-w-xl text-slate-900">
        <div class="relative overflow-hidden rounded-3xl border border-white/25 bg-white/30 backdrop-blur-md shadow-[0_24px_60px_rgba(15,23,42,0.2)]">
          <div class="absolute inset-0 bg-gradient-to-br from-white/70 via-white/45 to-white/20"></div>
          <div class="relative space-y-6 px-8 py-10">
            <h1 class="text-4xl lg:text-6xl leading-tight font-semibold text-slate-900">
              <span class="block">{t.hero.title1}</span>
              <span class="block">{t.hero.title2}</span>
            </h1>
            <p class="text-lg text-slate-700 max-w-lg font-medium">
              {t.hero.subtitle}
            </p>
            <div class="flex flex-col sm:flex-row gap-4">
              <a
                href="#contact"
                onclick="scrollToSection('#contact')"
                class="relative overflow-hidden px-8 py-6 text-lg rounded-xl group inline-flex items-center justify-center text-accent-foreground bg-accent shadow-[0_22px_48px_rgba(123,224,183,0.35)] transition-all hover:-translate-y-[2px] hover:shadow-[0_32px_60px_rgba(123,224,183,0.4)] active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent/45"
              >
                <span class="absolute inset-[1.5px] rounded-[0.85rem] bg-accent"></span>
                <span class="absolute inset-0 rounded-xl border border-white/22"></span>
                <span class="pointer-events-none absolute inset-y-[8px] left-[10px] w-[2.5px] rounded-full bg-white/40 blur-[2px]"></span>
                <span class="pointer-events-none absolute inset-y-[8px] right-[10px] w-[2.5px] rounded-full bg-white/28 blur-[2px]"></span>
                <span class="relative inline-flex items-center">
                  {t.hero.cta}
                <svg class="ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                </svg>
                </span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const HERO_VIDEO_RATE = 0.6;

  function setHeroVideoRate() {
    const video = document.getElementById('hero-video');
    if (!video) return;

    const applyRate = () => {
      try {
        video.playbackRate = HERO_VIDEO_RATE;
      } catch (error) {
        console.error('Playback rate set error:', error);
      }
    };

    if (video.readyState >= 2) {
      applyRate();
    } else {
      video.addEventListener('loadedmetadata', applyRate, { once: true });
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', setHeroVideoRate);
  } else {
    setHeroVideoRate();
  }
</script>

<style>
  .hero-video-sharp {
    /* Verbesserte Bildqualität und Schärfe */
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    filter: contrast(1.1) brightness(1.05) saturate(1.1);
    /* Anti-Aliasing für bessere Qualität */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Bessere Skalierung */
    transform: translateZ(0);
    backface-visibility: hidden;
    /* Hardware-Beschleunigung für bessere Performance */
    will-change: transform;
  }
  
  /* Zusätzliche Schärfe für verschiedene Bildschirmgrößen */
  @media (min-width: 768px) {
    .hero-video-sharp {
      filter: contrast(1.15) brightness(1.05) saturate(1.1);
    }
  }
  
  @media (min-width: 1024px) {
    .hero-video-sharp {
      filter: contrast(1.2) brightness(1.05) saturate(1.15);
    }
  }
</style>

